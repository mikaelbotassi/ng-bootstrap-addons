/// Variante compacta de form-floating com label acima ao focar/preencher
/// Parâmetros:
/// - $text-fs  : font-size do texto do input
/// - $label-fs : font-size da label quando flutuada
/// - $gap      : espaço entre label e input
/// - $border-w : largura da borda (se usar Bootstrap, pode passar $border-width)
/// - $px       : padding-x do input
/// - $py       : padding-y do input (se null, usa calc(.45em + $border-w))
@mixin nb-form-floating-size(
  $text-fs: 1em,
  $gap: 0em,
  $border-w: null,
  $px: 1em,
  $py: null,
) {
  // fallback de borda e padding-y
  $border-w: if($border-w == null,
    if(global-variable-exists(border-width), $border-width, 1px),
    $border-w
  );
  $lh: 1.5; // line-height fixo
  $lf-perc: 0.75; // escala da label ao focar
  $label-fs: calc(($text-fs * $lf-perc));
  @if $py == null { $py: calc(.45em + #{$border-w}); }
  @else { $py: calc(#{$py} + #{$border-w}); }
  $transitions: all .15s ease-in-out;

  > textarea {
    min-height: 4em !important;
    + label{
      top: 1em;
      transform: translateY(0);
    }
  }

  // === estilos ===
  > label{
    display: inline-flex;
    align-items: baseline;
    padding: 0 $px;
    font-size: $text-fs;
    line-height: $lh;
    height: auto;
    top: 50%;
    transform: translateY(-50%);
    transition: $transitions;
  }

  > .form-control,
  > .form-control-plaintext,
  > .form-select{
    font-size: $text-fs;
    padding: $py $px $py calc($px - 3px);
    height: auto;
    min-height: auto;
    &:has(~label){
      padding-top: calc($label-fs + $gap + $py);
    }
  }

  // estados de flutuação (foco/valor)
  > .form-control:focus,
  > .form-control:not(:placeholder-shown),
  > .form-control-plaintext,
  > .form-select {
    ~ label{
      padding-bottom: $gap;
      padding-top: calc($lh * $py) !important;
      transform: translateY(0) scale($lf-perc);
      top: 0;
      transition: $transitions;
    }
  }
}

/* XS */
.form-floating.form-floating-xs {
  @include nb-form-floating-size(
    $text-fs: .5rem,
    $gap: .1rem,
    $py: .25rem,
    $border-w: $border-width,
    $px: 1rem,
  );
}

/* SM (a sua atual) */
.form-floating.form-floating-sm {
  @include nb-form-floating-size(
    $text-fs: .65rem,
    $border-w: $border-width,
    $gap: .15rem,
    $px: 1rem,
    $py: .35rem
  );
}

.form-floating.form-floating-md {
  @include nb-form-floating-size(
    $text-fs: .75rem,
    $gap: .25rem,
    $border-w: $border-width,
    $px: 1rem,
    $py: .35rem,
  );
}

/* LG */
.form-floating.form-floating-lg {
  @include nb-form-floating-size(
    $text-fs: 1rem,
    $gap: .5rem,
    $border-w: $border-width,
    $px: 1rem,
    $py: .5rem,
  );
}
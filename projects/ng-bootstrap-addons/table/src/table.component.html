<div class="card">
    @if(caption()){
        <div class="p-3">
            <ng-container *ngTemplateOutlet="caption()!"></ng-container>
            @if(columns()?.length){
                <nba-multiselect
                    [options]="columnsOptions()"
                    formGroupClass="col-12 col-sm-6 col-xl-2 mt-3"
                    size="sm"
                    label="Colunas"
                    [(ngModel)]="selectedColumnsFields"
                />
            }
        </div>
    }
    <div class="d-grid px-3">
        <div class="table-responsive" dragScroll>
            <table class="table table-sm align-middle mb-0">
                @if(header()){
                    <thead class="table-white">
                        <ng-container *ngTemplateOutlet="header()!; context: {
                            $implicit: this,
                            columns: visibleColumns(),
                            sortField: sortField(),
                            sortDirection: sortDirection(),
                            onSort: onSort.bind(this),
                        }"></ng-container>
                    </thead>
                }
                <tbody>
                    @if(pg.paginatedList().length){
                        <ng-container *ngTemplateOutlet="body()!; context: { $implicit: pg.paginatedList(), rows:rows(), columns: visibleColumns() }"></ng-container>
                    }@else{
                        <tr><td colspan="100%" class="text-center text-muted">Nenhum registro encontrado</td></tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <div class="py-3 pe-3 ms-auto">
        <nba-pagination [(itemsPerPage)]="itemsPerPage" [queryParamName]="urlParam()" [(currentPage)]="currentPage" [changeUrl]="syncWithUrl()"  [class]="paginated() && processedData().length ? '' : 'd-none'" #pg [list]="processedData()"></nba-pagination>
    </div>
</div>
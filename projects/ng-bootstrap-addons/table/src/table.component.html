<div class="card">
    @if(caption()){
        <div class="p-3 nba-caption">
            <ng-container *ngTemplateOutlet="caption()!"></ng-container>
            <div class="d-flex align-items-center flex-wrap justify-content-between gap-2 w-100">
                <a href="javascript:;" class="btn btn-sm btn-outline-dark no-validate" (click)="clearFilters()">
                    <i class="nba-filter-off"></i>
                    Limpar
                </a>
                @if(globalFilterFields().length){
                    <input
                        class="form-control form-control-sm w-auto no-validate"
                        placeholder="Buscar..."
                        [ngModel]="globalFilter()"
                        (ngModelChange)="onGlobalFilterChange($event)"
                    />
                }
                @if(columns()){
                    <nba-col-multiselect [options]="columns() ?? []" [(values)]="selectedColumnFields" />
                }
            </div>
        </div>
    }
    <div class="d-grid px-3">
        <div class="table-responsive" dragScroll>
            <table class="table table-sm align-middle mb-0">
                @if(header()){
                    <thead class="table-white">
                        <ng-container *ngTemplateOutlet="header()!; context: {
                            columns: visibleColumns(),
                            sortField: sortField(),
                            sortDirection: sortDirection(),
                            onSort: setSort.bind(this),
                        }"></ng-container>
                    </thead>
                }
                <tbody>
                    @if(pg.paginatedList().length){
                        <ng-container *ngTemplateOutlet="body()!; context: { $implicit: pg.paginatedList(), rows:rows(), columns: visibleColumns() }"></ng-container>
                    }@else{
                        <tr><td colspan="100%" class="text-center text-muted">Nenhum registro encontrado</td></tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <div class="py-3 pe-3 ms-auto">
        <nba-pagination [(itemsPerPage)]="itemsPerPage" [queryParamName]="urlParam()" [(currentPage)]="currentPage" [changeUrl]="syncWithUrl()"  [class]="paginated() && processedData().length ? '' : 'd-none'" #pg [list]="processedData()"></nba-pagination>
    </div>
</div>